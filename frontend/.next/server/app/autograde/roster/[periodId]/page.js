(()=>{var e={};e.id=719,e.ids=[719],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},74307:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>d.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>o});var a=s(67096),r=s(16132),n=s(37284),d=s.n(n),l=s(32564),i={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);s.d(t,i);let o=["",{children:["autograde",{children:["roster",{children:["[periodId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,90542)),"/home/ubuntu/AutoGradeWeb/frontend/app/autograde/roster/[periodId]/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,17897)),"/home/ubuntu/AutoGradeWeb/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"]}],c=["/home/ubuntu/AutoGradeWeb/frontend/app/autograde/roster/[periodId]/page.tsx"],u="/autograde/roster/[periodId]/page",x={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/autograde/roster/[periodId]/page",pathname:"/autograde/roster/[periodId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},72269:(e,t,s)=>{Promise.resolve().then(s.bind(s,28417))},28417:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>StudentManagementPage});var a=s(30784),r=s(9885),n=s(57114),d=s(77694),l=s(19177);function StudentManagementPage(){let e=(0,n.useRouter)(),t=(0,n.useParams)(),s=t?.periodId,[i,o]=(0,r.useState)(new Set),[c,u]=(0,r.useState)(!1),[x,m]=(0,r.useState)(!1),[p,h]=(0,r.useState)(null),{data:g,loading:b}=(0,d.h)(`/api/periods/${s}`),{data:y,loading:f,refetch:j}=(0,d.h)(`/api/students/period/${s}`),{data:N}=(0,d.h)("/api/periods"),toggleStudent=e=>{let t=new Set(i);t.has(e)?t.delete(e):t.add(e),o(t)},deleteSelected=async()=>{if(confirm(`Delete ${i.size} student(s)?`))try{for(let e of Array.from(i))await l.Z.delete(`/api/students/${e}`);o(new Set),j()}catch(e){alert("Failed to delete students")}};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("div",{className:"bg-white shadow",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-4",children:[a.jsx("button",{onClick:()=>e.push("/autograde/roster"),className:"text-blue-600 hover:text-blue-800 mb-4",children:"â† Back to Periods"}),(0,a.jsxs)("h1",{className:"text-2xl font-bold",children:[g?.name||"Loading..."," - Student Management"]})]})}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[a.jsx("div",{className:"bg-white rounded-lg shadow mb-6 p-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("div",{className:"flex items-center space-x-4",children:i.size>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[i.size," selected"]}),a.jsx("button",{onClick:deleteSelected,className:"px-3 py-1 bg-red-100 text-red-700 rounded-md hover:bg-red-200 text-sm",children:"Delete Selected"}),a.jsx("button",{onClick:()=>m(!0),className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 text-sm",children:"Move to Period"})]})}),a.jsx("button",{onClick:()=>u(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Add Student"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left",children:a.jsx("input",{type:"checkbox",checked:i.size===y?.length&&y?.length>0,onChange:()=>{i.size===y?.length?o(new Set):o(new Set(y?.map(e=>e._id)||[]))},className:"rounded border-gray-300"})}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student ID"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f?a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"px-6 py-8 text-center",children:"Loading..."})}):y?.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-500",children:"No students in this period yet."})}):y?.map(e=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4",children:a.jsx("input",{type:"checkbox",checked:i.has(e._id),onChange:()=>toggleStudent(e._id),className:"rounded border-gray-300"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.studentId}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.firstName," ",e.lastName]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.email||"-"}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:[a.jsx("button",{onClick:()=>h(e),className:"text-blue-600 hover:text-blue-800 mr-3",children:"Edit"}),a.jsx("button",{onClick:async()=>{confirm("Delete this student?")&&(await l.Z.delete(`/api/students/${e._id}`),j())},className:"text-red-600 hover:text-red-800",children:"Delete"})]})]},e._id))})]})}),c&&a.jsx(AddStudentDialog,{periodId:s,onSuccess:()=>{u(!1),j()},onCancel:()=>u(!1)}),p&&a.jsx(EditStudentDialog,{student:p,onSuccess:()=>{h(null),j()},onCancel:()=>h(null)}),x&&a.jsx(MoveStudentsDialog,{selectedStudents:Array.from(i),currentPeriodId:s,periods:N?.filter(e=>e._id!==s)||[],onSuccess:()=>{m(!1),o(new Set),j()},onCancel:()=>m(!1)})]})]})}function AddStudentDialog({periodId:e,onSuccess:t,onCancel:s}){let[n,d]=(0,r.useState)({studentId:"",firstName:"",lastName:"",email:""}),[i,o]=(0,r.useState)(!1),handleSubmit=async s=>{s.preventDefault(),o(!0);try{await l.Z.post("/api/students",{...n,periodId:e}),t()}catch(e){alert(e.response?.data?.error||"Failed to add student")}finally{o(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Add New Student"}),(0,a.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Student ID ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:n.studentId,onChange:e=>d({...n,studentId:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["First Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:n.firstName,onChange:e=>d({...n,firstName:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Last Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:n.lastName,onChange:e=>d({...n,lastName:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email (Optional)"}),a.jsx("input",{type:"email",value:n.email,onChange:e=>d({...n,email:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{className:"flex space-x-3 pt-4",children:[a.jsx("button",{type:"submit",disabled:i,className:`flex-1 px-4 py-2 rounded-md font-medium ${i?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:i?"Adding...":"Add Student"}),a.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"})]})]})]})})}function EditStudentDialog({student:e,onSuccess:t,onCancel:s}){let[n,d]=(0,r.useState)({firstName:e.firstName,lastName:e.lastName,email:e.email||""}),[i,o]=(0,r.useState)(!1),handleSubmit=async s=>{s.preventDefault(),o(!0);try{await l.Z.put(`/api/students/${e._id}`,n),t()}catch(e){alert(e.response?.data?.error||"Failed to update student")}finally{o(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Edit Student"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mb-4",children:["Student ID: ",e.studentId]}),(0,a.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["First Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:n.firstName,onChange:e=>d({...n,firstName:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Last Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:n.lastName,onChange:e=>d({...n,lastName:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),a.jsx("input",{type:"email",value:n.email,onChange:e=>d({...n,email:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{className:"flex space-x-3 pt-4",children:[a.jsx("button",{type:"submit",disabled:i,className:`flex-1 px-4 py-2 rounded-md font-medium ${i?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:i?"Saving...":"Save Changes"}),a.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"})]})]})]})})}function MoveStudentsDialog({selectedStudents:e,currentPeriodId:t,periods:s,onSuccess:n,onCancel:d}){let[i,o]=(0,r.useState)(""),[c,u]=(0,r.useState)(!1),handleMove=async()=>{if(!i){alert("Please select a target period");return}u(!0);try{await l.Z.post("/api/students/move",{studentIds:e,fromPeriodId:t,toPeriodId:i}),n()}catch(e){alert(e.response?.data?.error||"Failed to move students")}finally{u(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Move Students"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mb-4",children:["Moving ",e.length," student(s) to another period."]}),(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Target Period"}),(0,a.jsxs)("select",{value:i,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Choose a period..."}),s.map(e=>a.jsx("option",{value:e._id,children:e.name},e._id))]})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:handleMove,disabled:c||!i,className:`flex-1 px-4 py-2 rounded-md font-medium ${c||!i?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:c?"Moving...":"Move Students"}),a.jsx("button",{type:"button",onClick:d,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"})]})]})})}},90542:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>d,__esModule:()=>n,default:()=>i});var a=s(95153);let r=(0,a.createProxy)(String.raw`/home/ubuntu/AutoGradeWeb/frontend/app/autograde/roster/[periodId]/page.tsx`),{__esModule:n,$$typeof:d}=r,l=r.default,i=l}};var t=require("../../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[657,12,145,622,177,694],()=>__webpack_exec__(74307));module.exports=s})();